{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/normalize.css/normalize.css","webpack:///./src/css/style.css","webpack:///./src/js/index.js","webpack:///./src/js/widget/CreateElement.js","webpack:///./src/js/widget/CreateStyleSheet.js","webpack:///./src/js/widget/EventOpenCloseChat.js","webpack:///./src/js/widget/RandomMessage.js","webpack:///./src/js/widget/ShowMessage.js","webpack:///./src/js/widget/widget.js"],"names":["widget","Widget","init","CreateElement","name","post","linkImg","tagBody","document","body","divChat","createElement","className","setAttribute","divBtnClose","appendChild","divHeader","divPhotoManager","divPhoto","divNameManager","divName","innerHTML","divPosition","divBody","divMsg","divFooter","divFooterText","user","text","classList","add","CreateStyleSheet","styleTag","head","EventOpenCloseChat","isOpen","chatId","getElementById","remove","RandomMessage","lengthArray","rand","Math","random","round","ShowMessage","createdElem","createStyleSheet","randomMessage","сreateElement","showMessage","eventOpenCloseChat","firstMsg","message","setTimeout","createMessage","show","messageArray","push","msg","replyAi","msgText","arrayMesgAi","length","scrollBodyMessage","scrollTop","scrollHeight","onlineUser","chatOpen","chatIdClose","chatIdHead","userReply","addEventListener","listenerDOMContentLoaded","listenerOpenClose","console","log","openClose","removeEventListener","sendMessage","e","keyCode","preventDefault","value"],"mappings":"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","file":"js/script.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/index.js\");\n","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","'use strict';\r\n\r\nimport 'normalize.css';\r\nimport '../css/style.css';\r\n\r\nimport Widget from './widget/widget';\r\n\r\nlet widget = new Widget;\r\nwidget.init();\r\n\r\n","'use strict';\r\n\r\nexport default class CreateElement {\r\n\r\n    constructor(name, post, linkImg){\r\n        \r\n        let tagBody = document.body;\r\n\r\n        // Создаю <div> тела чата\r\n        let divChat = document.createElement('div');\r\n        divChat.className = 'spchat spchat-hidden';\r\n        divChat.setAttribute('id', 'spchat');\r\n\r\n        // Кнопка закрыть\r\n        let divBtnClose = document.createElement('div');\r\n        divBtnClose.className = 'spchat__close';\r\n        divBtnClose.setAttribute('id', 'spchat__close')\r\n        divChat.appendChild(divBtnClose);\r\n\r\n        // Секция описания менеджера\r\n        let divHeader = document.createElement('div');\r\n        divHeader.className = 'spchat__header';\r\n        divHeader.setAttribute('id', 'spchat__header')\r\n            // Обортка фото менеджера\r\n            let divPhotoManager = document.createElement('div');\r\n            divPhotoManager.className = 'spchat__photo-wrapp';\r\n                // Фото менеджера\r\n                let divPhoto = document.createElement('img');\r\n                divPhoto.className = 'spchat__photo';\r\n                divPhoto.setAttribute('src', linkImg)\r\n            divPhotoManager.appendChild(divPhoto);\r\n        divHeader.appendChild(divPhotoManager);\r\n            // Имя и должность менеджера\r\n            let divNameManager = document.createElement('div');\r\n            divNameManager.className = 'spchat__manager';\r\n                // Имя\r\n                let divName = document.createElement('div');\r\n                divName.className = 'spchat__manager-name';\r\n                divName.innerHTML = name;\r\n            divNameManager.appendChild(divName);\r\n                // Должность\r\n                let divPosition = document.createElement('div');\r\n                divPosition.className = 'spchat__manager-position';\r\n                divPosition.innerHTML = post;\r\n            divNameManager.appendChild(divPosition);\r\n        divHeader.appendChild(divNameManager);\r\n        divChat.appendChild(divHeader);\r\n\r\n        // Секция самого чата \r\n        let divBody = document.createElement('div');\r\n        divBody.className = 'spchat__body';\r\n        divBody.setAttribute('id', 'spchat__body')\r\n            // Обертка для сообщений\r\n            let divMsg = document.createElement('div');\r\n            divMsg.className = 'spchat__massages';\r\n            divMsg.setAttribute('id', 'spchat__massages')\r\n        divBody.appendChild(divMsg);\r\n        divChat.appendChild(divBody);\r\n\r\n        // Секция отправки сообщения\r\n        let divFooter = document.createElement('div');\r\n        divFooter.className = 'spchat__footer';\r\n            // Textarea отправки сообщения\r\n            let divFooterText = document.createElement('textarea');\r\n            divFooterText.className = 'spchat__textarea';\r\n            divFooterText.setAttribute('id', 'sendMessage');\r\n            divFooterText.setAttribute('placeholder', 'Введите сообщение и нажмите Enter');\r\n            divFooterText.setAttribute('autocomplete', 'off');\r\n            divFooterText.setAttribute('maxlength', '1000');\r\n        divFooter.appendChild(divFooterText);\r\n        divChat.appendChild(divFooter);\r\n\r\n        // Вставляю в конец всех элементов в родителе BODY\r\n        tagBody.appendChild(divChat);\r\n    }\r\n    \r\n    // Создание html блока сообщения\r\n    createMessage(user, text){\r\n\r\n        // Создаю <div>\r\n        let divMsg = document.createElement('div');\r\n        divMsg.classList.add('spchat__massage');\r\n        /**\r\n         * Условия от кого сообщение (true/false)\r\n         * взависимости от кого, добаляю разные css классы\r\n         */ \r\n        if(user){\r\n            divMsg.classList.add('spchat__massage--user');\r\n        } else {\r\n            divMsg.classList.add('spchat__massage--manager');\r\n        }\r\n\r\n        // В созданный <div> вставляю текст сообщения\r\n        divMsg.innerHTML = text;\r\n        \r\n        return divMsg;\r\n    }\r\n}","'use strict';\r\n\r\nexport default class CreateStyleSheet {\r\n\r\n    constructor(){\r\n\r\n        // Создаю <style>\r\n        let styleTag = document.createElement('style');\r\n\r\n        \r\n        // let styleSheet = styleTag.sheet\r\n\r\n        //styleSheet.insertRule(\" h1 { font-style: italic } \", 0);\r\n\r\n        styleTag.innerHTML = \"\\\r\n            .spchat { display: flex; \\\r\n                flex-direction: column; position: fixed;\\\r\n                right: 30px; bottom: 10px; width: 300px; height: 400px;\\\r\n                font-size: 14px; font-family: Arial, Helvetica, sans-serif;\\\r\n                box-shadow: 0 12px 25px 8px rgba(0, 0, 0, 0.17);\\\r\n                transition: all 0.3s cubic-bezier(0.39, 0.24, 0.21, 0.99);\\\r\n                transform-origin: 0 100%; overflow: hidden; }\\\r\n            .spchat__close { position: absolute; right: 10px; top: 10px; width: 26px;\\\r\n                height: 26px; border-radius: 50%; border: 2px solid #333;\\\r\n                background-color: #fff; cursor: pointer; }\\\r\n            .spchat__close:before, .spchat__close:after { position: absolute;\\\r\n                left: 10px; top: 5px; content: ''; height: 12px; width: 2px;\\\r\n                background-color: #333; }\\\r\n            .spchat__close:before { transform: rotate(45deg); }\\\r\n            .spchat__close:after { transform: rotate(-45deg); }\\\r\n            .spchat__header { display: flex; align-items: center; background-color: #23283c;\\\r\n                border-radius: 3px 3px 0 0; color: #f0f1f1; padding: 20px;\\\r\n                min-height: 75px; }\\\r\n            .spchat__photo { display: block; border-radius: 50%; margin-right: 20px;\\\r\n                height: 50px; width: 50px; }\\\r\n            .spchat__manager-name { margin-bottom: 5px; }\\\r\n            .spchat__manager-position { font-size: 12px; opacity: 0.7; }\\\r\n            .spchat__body { background-color: #fff; height: 245px; overflow-x: hidden;\\\r\n                overflow-y: scroll; padding: 10px 5px; }\\\r\n            .spchat__massage-wrap { position: relative; margin: 5px 0; }\\\r\n            .spchat__massage-wrap:after { visibility: hidden; display: block;\\\r\n                font-size: 0; content: ''; clear: both; height: 0; }\\\r\n            .spchat__footer { min-height: 80px; background-color: #eef1f5;\\\r\n                padding: 10px 15px; }\\\r\n            .spchat__textarea {height: 60px; padding: 5px; overflow: hidden;\\\r\n                overflow-y: auto; width: 270px; border: 1px solid #299f53;\\\r\n                border-radius: 3px; resize: none; color: #545d6b;\\\r\n                margin-bottom: 10px; line-height: 15px; }\\\r\n            .spchat-hidden { bottom: -330px; cursor: pointer; }\\\r\n            .spchat__massage { color: #f0f1f1; border-radius: 3px;\\\r\n                background-color: #e4eefd; width: 80%; max-width: 210px;\\\r\n                padding: 7px 11px; margin: 5px 0; margin-right: 11px;\\\r\n                animation-duration: 0.4s; animation-timing-function: cubic-bezier(0, 0.79, 0.34, 1.38); }\\\r\n            .spchat__massage:after { content: ''; position: absolute; width: 0;\\\r\n                height: 0; border-top: 5px solid transparent; border-bottom: 5px solid transparent; }\\\r\n            .spchat__massage--manager { position: relative; background-color: #3cb868;\\\r\n                float: left; text-align: left; margin-left: 11px;\\\r\n                animation-name: showMsgMng; }\\\r\n            .spchat__massage--manager:after { left: -5px; top: 5px;\\\r\n                border-right: 5px solid #3cb868; }\\\r\n            .spchat__massage--user { position: relative; background-color: #e4eefd;\\\r\n                float: right; color: #414243; text-align: right; margin-right: 11px;\\\r\n                animation-name: showMsgUser; }\\\r\n            .spchat__massage--user:after { right: -5px; top: 5px; border-left: 5px solid #e4eefd; }\\\r\n            @keyframes showMsgMng { from { left: -240px; } to { left: 0px; } } \\\r\n            @keyframes showMsgUser { from { right: -240px; } to { right: 0; } }\";\r\n\r\n       // Вставляю <style> в head\r\n        document.head.appendChild(styleTag);\r\n    }\r\n}","'use strict';\r\n\r\nexport default class EventOpenCloseChat {\r\n\r\n    openClose(isOpen){\r\n\r\n        // Выбор чата для добавления/удаления класса \r\n        let chatId = document.getElementById('spchat');\r\n\r\n        // проверка, открыт ли чат\r\n        if (!isOpen) {\r\n\r\n            // удаляю класс\r\n            chatId.classList.remove('spchat-hidden');\r\n\r\n            return true;\r\n\r\n        } else {\r\n\r\n            // добавляю класс\r\n            chatId.classList.add('spchat-hidden');\r\n\r\n            return false;\r\n        }\r\n    }\r\n\r\n}","'use strict';\r\n\r\nexport default class RandomMessage{\r\n\r\n    random(lengthArray){\r\n        let rand = 0 - 0.5 + Math.random() * (lengthArray - 0 + 1)\r\n        rand = Math.round(rand);\r\n        // Если ссгенерировано -0, тогда присваеваем 0\r\n        if (rand === -0) rand = 0;\r\n\r\n        return rand;\r\n    }\r\n\r\n}\r\n\r\n","'use strict';\r\n\r\nexport default class ShowMessage {\r\n\r\n    show(createdElem){\r\n        // Поиск элемента куда вставить \r\n        let divMsg = document.getElementById('spchat__massages');\r\n        // Вставляю в конец всех элементов в родителе\r\n        divMsg.appendChild(createdElem);\r\n    }\r\n}","'use strict';\r\n\r\nimport CreateStyleSheet from './CreateStyleSheet';\r\nimport RandomMessage from './RandomMessage';\r\nimport CreateElement from './CreateElement';\r\nimport ShowMessage from './ShowMessage';\r\nimport EventOpenCloseChat from './EventOpenCloseChat';\r\n\r\n\r\nexport default class Widget {\r\n\r\n    init(){\r\n\r\n        // Класс создания и подключения <style>\r\n        let createStyleSheet  = new CreateStyleSheet();\r\n\r\n        // Класс генерации чисел \r\n        let randomMessage = new RandomMessage();\r\n\r\n        // Класс создания html элементов\r\n        let сreateElement = new CreateElement('Артем Чичерин', 'DB Engineer', 'assets/img/news-01.jpg');\r\n\r\n        // Класс показа сообщений в чате\r\n        let showMessage = new ShowMessage();\r\n        \r\n        //\r\n        let eventOpenCloseChat = new EventOpenCloseChat();\r\n\r\n        function firstMsg(message){\r\n\r\n            setTimeout(function(){\r\n            \r\n                let divMsg = сreateElement.createMessage(false, message);\r\n                // Показываю сообщение\r\n                showMessage.show(divMsg);\r\n                // Добавляю в массив сообщение\r\n                messageArray.push({name: 'manager', msg: message})\r\n            }, 700);\r\n        }\r\n\r\n        function replyAi(){\r\n            setTimeout(function(){\r\n                // генерирую случайное число, по которому выбираю сообщение из массива\r\n                let msgText = arrayMesgAi[ randomMessage.random(arrayMesgAi.length-1) ]; \r\n             \r\n                // создаю HTML сообщения\r\n                let msg = сreateElement.createMessage(false, msgText);\r\n\r\n                // показываю \r\n                showMessage.show(msg);\r\n\r\n                // Добавляю в массив сообщение\r\n                messageArray.push({name: 'manager', msg: msgText})\r\n\r\n                // Автопрокрутка скролла\r\n                let scrollBodyMessage = document.getElementById('spchat__body');\r\n                scrollBodyMessage.scrollTop = scrollBodyMessage.scrollHeight;\r\n\r\n            }, 1000)\r\n\r\n        }\r\n        /**************START******************/\r\n\r\n        // Флаг online\r\n        let onlineUser = false;\r\n\r\n        // Флаг, чат открыт/закрыт\r\n        let chatOpen = false;\r\n\r\n        // Выбор кнопки закрыть для закрытия чата \r\n        let chatIdClose = document.getElementById('spchat__close');\r\n\r\n        // Выбор header чата\r\n        let chatIdHead = document.getElementById('spchat__header');\r\n        \r\n        // Флаг, ответа пользователя\r\n        let userReply = false;\r\n\r\n        //\r\n        let messageArray = [];\r\n\r\n        // Временный массив ответов менеджера\r\n        let arrayMesgAi = [\r\n            ' Как к Вам обращаться ',\r\n            ' Мне необходимо время на уточнение информации ',\r\n            ' Пока жду ответа от руководства, могу рассказать анекдот ',\r\n            ' Одну минуту, пожайлуста ',\r\n            ' Время ожидания ответа истекло. Попробуйте обратиться позже ',\r\n            ' Сообщите свой e-mail, я на него позже отвечу',\r\n            ' Как с Вам связаться?',\r\n            ' Прошу Вас подождать, я отвечу через несколько минут '\r\n        ];\r\n\r\n        // Событие на загрузку документа\r\n        document.addEventListener('DOMContentLoaded', listenerDOMContentLoaded);\r\n\r\n        function listenerDOMContentLoaded(){\r\n\r\n            // через 3,5сек выполнить \r\n            setTimeout(function(){\r\n                // Если чат закрыть, то открыть\r\n                if(!chatOpen) {\r\n\r\n                    // chatOpen = eventOpenCloseChat.openClose(chatOpen);\r\n                    listenerOpenClose()\r\n\r\n                    console.log('3.5');\r\n                } \r\n\r\n            }, 3500);\r\n             \r\n        }\r\n\r\n        // // Событие на активность документа\r\n        // window.addEventListener(\"focus\", function() {\r\n\r\n        //     if (onlineUser) {\r\n        //         // Открыть чат автоматически по истечению 3,5с\r\n        //         setTimeout(function(){\r\n        //             eventOpenChat();\r\n        //             console.log('setTimeout - ok') \r\n        //         }, 4500);\r\n        //     }\r\n            \r\n        //     console.log('active') \r\n        // });\r\n\r\n        // // Событие на уход со страницы\r\n        // window.addEventListener(\"blur\", function() {\r\n        //     onlineUser = true;\r\n        // });\r\n\r\n\r\n        // Вешаю событие клик на header \r\n        chatIdHead.addEventListener('click', listenerOpenClose);\r\n\r\n        function listenerOpenClose(){\r\n\r\n            chatOpen = eventOpenCloseChat.openClose(chatOpen);\r\n\r\n            if (chatOpen) {\r\n                \r\n                // удаляю прослушку события по header чата\r\n                chatIdHead.removeEventListener('click', listenerOpenClose);\r\n\r\n                // Вешаю прослушку события на кпонку закрытие\r\n                chatIdClose.addEventListener('click', listenerOpenClose);\r\n\r\n                // Пустой ли массив сообщений\r\n                if (messageArray.length === 0) {\r\n                    // Функция \r\n                    firstMsg('Здравствуйте! Чем я могу вам помочь?');\r\n                }\r\n                console.log('удалить событие на header и добавлено на close');\r\n            } else {\r\n                // Вешаю событие клик на header \r\n                chatIdHead.addEventListener('click', listenerOpenClose);\r\n                // удаляю прослушку события на кпонку закрытие\r\n                chatIdClose.removeEventListener('click', listenerOpenClose);\r\n                console.log('добавить');\r\n            }\r\n\r\n        };\r\n\r\n        // Ищю кнопку textarea\r\n        let sendMessage = document.getElementById('sendMessage');\r\n\r\n        // Вешаю событиние на Enter\r\n        sendMessage.addEventListener('keydown', function(e){\r\n\r\n            // Если нажата кнопка Enter(13)\r\n            if (e.keyCode === 13) {\r\n                // Отменяю перенос строки, действие по умолчанию\r\n                e.preventDefault();\r\n\r\n                // Если сообщение не пустое\r\n                if( this.value !== '') {\r\n\r\n                    // Создаю html разметку с собщением \r\n                    let msg = сreateElement.createMessage(true, this.value);\r\n                    // \r\n                    showMessage.show(msg);\r\n                    messageArray.push({name: 'user', msg: this.value})\r\n                \r\n                    // Ответа манагера\r\n                    replyAi();\r\n                }\r\n\r\n                // Автопрокрутка скролла\r\n                let scrollBodyMessage = document.getElementById('spchat__body');\r\n                scrollBodyMessage.scrollTop = scrollBodyMessage.scrollHeight;\r\n\r\n                // Сбрасываю значение поля\r\n                sendMessage.value = '';\r\n\r\n            }\r\n        });\r\n    }\r\n}"],"sourceRoot":""}