{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/normalize.css/normalize.css","webpack:///./src/css/style.css","webpack:///./src/js/index.js","webpack:///./src/js/widget/CreateElement.js","webpack:///./src/js/widget/CreateStyleSheet.js","webpack:///./src/js/widget/EventOpenCloseChat.js","webpack:///./src/js/widget/Message.js","webpack:///./src/js/widget/RandomMessage.js","webpack:///./src/js/widget/ShowMessage.js","webpack:///./src/js/widget/User.js","webpack:///./src/js/widget/widget.js"],"names":["scripts","document","getElementsByTagName","myScript","length","queryString","src","replace","params","parseQuery","query","Params","Object","Pairs","split","i","KeyVal","key","val","widget","Widget","init","position","CreateElement","name","post","linkImg","tagBody","body","divChat","createElement","className","setAttribute","divBtnClose","appendChild","divHeader","divPhotoManager","divPhoto","divNameManager","divName","innerHTML","divPosition","divHidden2","divBody","divMsg","divFooter","divFooterText","user","text","classList","add","CreateStyleSheet","styleTag","head","pos","getElementById","console","log","EventOpenCloseChat","isOpen","chatId","remove","Message","type","data","RandomMessage","lengthArray","rand","Math","random","round","ShowMessage","createdElem","User","id","messages","window","WebSocket","socket","storageIdUser","localStorage","getItem","setItem","String","slice","Date","now","sendMessage","posWidget","createStyleSheet","randomMessage","сreateElement","showMessage","eventOpenCloseChat","getClassPosition","firstMsg","message","setTimeout","createMessage","show","messageArray","push","msg","onlineUser","chatOpen","chatIdClose","chatIdHead","userReply","arrayMesgAi","addEventListener","listenerDOMContentLoaded","listenerOpenClose","openClose","removeEventListener","listenerSendMessage","bind","event","keyCode","preventDefault","target","value","msgString","JSON","stringify","send","scrollBodyMessage","scrollTop","scrollHeight","onmessage","messageFromManager","parse"],"mappings":"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","file":"js/script.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/index.js\");\n","// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","'use strict';\r\n\r\nimport 'normalize.css';\r\nimport '../css/style.css';\r\n\r\nimport Widget from './widget/widget';\r\n\r\n// Получаю живую колекцию <script> \r\nlet scripts = document.getElementsByTagName('script');\r\nlet myScript = scripts[scripts.length - 1];\r\n// С помощью регулярного выражения удаляю левую часть url\r\nlet queryString = myScript.src.replace(/^[^\\?]+\\??/,'');\r\n\r\nlet params = parseQuery(queryString);\r\n\r\nfunction parseQuery (query){\r\n\r\n    let Params = new Object();\r\n    \r\n    if (!query){\r\n        return Params; \r\n    }\r\n\r\n    let Pairs = query.split(/[;&]/);\r\n    \r\n    for (let i = 0; i < Pairs.length; i++ ){\r\n\r\n        let KeyVal = Pairs[i].split('=');\r\n\r\n        if (!KeyVal || KeyVal.length != 2) continue;\r\n\r\n        let key = KeyVal[0];\r\n        let val = KeyVal[1];\r\n\r\n        Params[key] = val;\r\n    }\r\n    return Params;\r\n}\r\n\r\nlet widget = new Widget;\r\nwidget.init(params.position);","'use strict';\r\n\r\nexport default class CreateElement {\r\n\r\n    constructor(name, post, linkImg){\r\n        \r\n        let tagBody = document.body;\r\n\r\n        // Создаю <div> тела чата\r\n        let divChat = document.createElement('div');\r\n        divChat.className = 'spchat spchat-hidden';\r\n        divChat.setAttribute('id', 'spchat');\r\n\r\n        // Кнопка закрыть\r\n        let divBtnClose = document.createElement('div');\r\n        divBtnClose.className = 'spchat__close';\r\n        divBtnClose.setAttribute('id', 'spchat__close')\r\n        divChat.appendChild(divBtnClose);\r\n\r\n        // Секция описания менеджера\r\n        let divHeader = document.createElement('div');\r\n        divHeader.className = 'spchat__header';\r\n        divHeader.setAttribute('id', 'spchat__header')\r\n            // Обортка фото менеджера\r\n            let divPhotoManager = document.createElement('div');\r\n            divPhotoManager.className = 'spchat__photo-wrapp';\r\n                // Фото менеджера\r\n                let divPhoto = document.createElement('img');\r\n                divPhoto.className = 'spchat__photo';\r\n                divPhoto.setAttribute('src', linkImg)\r\n            divPhotoManager.appendChild(divPhoto);\r\n        divHeader.appendChild(divPhotoManager);\r\n            // Имя и должность менеджера\r\n            let divNameManager = document.createElement('div');\r\n            divNameManager.className = 'spchat__manager';\r\n                // Имя\r\n                let divName = document.createElement('div');\r\n                divName.className = 'spchat__manager-name';\r\n                divName.innerHTML = name;\r\n            divNameManager.appendChild(divName);\r\n                // Должность\r\n                let divPosition = document.createElement('div');\r\n                divPosition.className = 'spchat__manager-position';\r\n                divPosition.innerHTML = post;\r\n            divNameManager.appendChild(divPosition);\r\n        divHeader.appendChild(divNameManager);\r\n        divChat.appendChild(divHeader);\r\n\r\n        // Секция самого чата \r\n        let divHidden2 = document.createElement('div');\r\n        divHidden2.className = 'spchat-hidden2';\r\n            let divBody = document.createElement('div');\r\n            divBody.className = 'spchat__body';\r\n            divBody.setAttribute('id', 'spchat__body')\r\n                // Обертка для сообщений\r\n                let divMsg = document.createElement('div');\r\n                divMsg.className = 'spchat__massages';\r\n                divMsg.setAttribute('id', 'spchat__massages')\r\n            divBody.appendChild(divMsg);\r\n            divHidden2.appendChild(divBody);\r\n\r\n            // Секция отправки сообщения\r\n            let divFooter = document.createElement('div');\r\n            divFooter.className = 'spchat__footer';\r\n                // Textarea отправки сообщения\r\n                let divFooterText = document.createElement('textarea');\r\n                divFooterText.className = 'spchat__textarea';\r\n                divFooterText.setAttribute('id', 'sendMessage');\r\n                divFooterText.setAttribute('placeholder', 'Введите сообщение и нажмите Enter');\r\n                divFooterText.setAttribute('autocomplete', 'off');\r\n                divFooterText.setAttribute('maxlength', '1000');\r\n            divFooter.appendChild(divFooterText);\r\n            divHidden2.appendChild(divFooter);\r\n        divChat.appendChild(divHidden2);\r\n\r\n        // Вставляю в конец всех элементов в родителе BODY\r\n        tagBody.appendChild(divChat);\r\n    }\r\n    \r\n    // Создание html блока сообщения\r\n    createMessage(user, text){\r\n\r\n        // Создаю <div>\r\n        let divMsg = document.createElement('div');\r\n        divMsg.classList.add('spchat__massage');\r\n        /**\r\n         * Условия от кого сообщение (true/false)\r\n         * взависимости от кого, добаляю разные css классы\r\n         */ \r\n        if(user){\r\n            divMsg.classList.add('spchat__massage--user');\r\n        } else {\r\n            divMsg.classList.add('spchat__massage--manager');\r\n        }\r\n\r\n        // В созданный <div> вставляю текст сообщения\r\n        divMsg.innerHTML = text;\r\n        \r\n        return divMsg;\r\n    }\r\n}","'use strict';\r\n\r\nexport default class CreateStyleSheet {\r\n\r\n    constructor(){\r\n\r\n        // Создаю <style>\r\n        let styleTag = document.createElement('style');\r\n\r\n        styleTag.innerHTML = `\r\n            .spchat { display: flex; z-index: 10;\r\n                flex-direction: column; position: fixed;\r\n                /* right: 30px; bottom: 10px;*/ width: 300px; height: 400px;\r\n                font-size: 14px; font-family: Arial, Helvetica, sans-serif;\r\n                box-shadow: 0 12px 25px 8px rgba(0, 0, 0, 0.17);\r\n                transition: all 0.3s cubic-bezier(0.39, 0.24, 0.21, 0.99);\r\n                transform-origin: 0 100%; overflow: hidden; }\r\n            .spchat__close { position: absolute; right: 10px; top: 10px; width: 26px;\r\n                height: 26px; border-radius: 50%; border: 2px solid #333;\r\n                background-color: #fff; cursor: pointer; box-sizing: border-box; }\r\n            .spchat__close:before, .spchat__close:after { position: absolute;\r\n                left: 10px; top: 5px; content: ''; height: 12px; width: 2px;\r\n                background-color: #333; }\r\n            .spchat__close:before { transform: rotate(45deg); }\r\n            .spchat__close:after { transform: rotate(-45deg); }\r\n            .spchat__header { display: flex; align-items: center; background-color: #23283c;\r\n                border-radius: 3px 3px 0 0; color: #f0f1f1; padding: 20px;\r\n                min-height: 75px; box-sizing: border-box; }\r\n            .spchat__photo { display: block; border-radius: 50%; margin-right: 20px;\r\n                height: 50px; width: 50px; }\r\n            .spchat__manager-name { margin-bottom: 5px; }\r\n            .spchat__manager-position { font-size: 12px; opacity: 0.7; }\r\n            .spchat__body { background-color: #fff; height: 245px; overflow-x: hidden;\r\n                overflow-y: scroll; padding: 10px 5px; }\r\n            .spchat__massage-wrap { position: relative; margin: 5px 0; }\r\n            .spchat__massage-wrap:after { visibility: hidden; display: block;\r\n                font-size: 0; content: ''; clear: both; height: 0; }\r\n            .spchat__footer { min-height: 80px; background-color: #eef1f5;\r\n                padding: 10px 15px; }\r\n            .spchat__textarea {height: 60px; padding: 5px; overflow: hidden;\r\n                overflow-y: auto; width: 270px; border: 1px solid #299f53;\r\n                border-radius: 3px; resize: none; color: #545d6b;\r\n                margin-bottom: 10px; line-height: 15px; box-sizing: border-box; }\r\n            .spchat-hidden { height: 70px; cursor: pointer; }\r\n            .spchat-hidden2 { transition: all 0.3s; transform-origin: top;\r\n                transform: scaleY(1); }\r\n            .spchat-hidden .spchat-hidden2 { transform: scaleY(0); }\r\n            .rb { right: 30px; bottom: 10px;}\r\n            .lb { left: 30px; bottom: 10px;}\r\n            .rt { right: 30px; top: 10px;}\r\n            .lt { left: 30px; top: 10px;}\r\n            .spchat__massage { color: #f0f1f1; border-radius: 3px;\r\n                background-color: #e4eefd; width: 85%; /*max-width: 210px;*/\r\n                padding: 7px 11px; margin: 5px 0; margin-right: 11px;\r\n                animation-duration: 0.4s; animation-timing-function: cubic-bezier(0, 0.79, 0.34, 1.38); }\r\n            .spchat__massage:after { content: ''; position: absolute; width: 0;\r\n                height: 0; border-top: 5px solid transparent; border-bottom: 5px solid transparent; }\r\n            .spchat__massage--manager { position: relative; background-color: #3cb868;\r\n                float: left; text-align: left; margin-left: 11px;\r\n                animation-name: showMsgMng; }\r\n            .spchat__massage--manager:after { left: -4px; top: 5px;\r\n                border-right: 5px solid #3cb868; }\r\n            .spchat__massage--user { position: relative; background-color: #e4eefd;\r\n                float: right; color: #414243; text-align: right; margin-right: 11px;\r\n                animation-name: showMsgUser; }\r\n            .spchat__massage--user:after { right: -5px; top: 5px; border-left: 5px solid #e4eefd; }\r\n            @keyframes showMsgMng { from { left: -240px; } to { left: 0px; } }\r\n            @keyframes showMsgUser { from { right: -240px; } to { right: 0; } }`;\r\n\r\n       // Вставляю <style> в head\r\n        document.head.appendChild(styleTag);\r\n    }\r\n\r\n    getClassPosition(pos){\r\n        let divChat = document.getElementById('spchat');\r\n        // let styleSheet = styleTag.sheet\r\n\r\n        switch(pos) {\r\n            case 'lb':\r\n                // styleSheet.insertRule(\" .lb {left: 30px; bottom: 10px;} \", 0);\r\n                divChat.classList.add('lb');\r\n                break;\r\n            case 'rt':\r\n                // styleSheet.insertRule(\" .rt { font-style: italic } \", 0);\r\n                divChat.classList.add('rt');\r\n                break;\r\n            case 'lt':\r\n                // styleSheet.insertRule(\" .lt { font-style: italic } \", 0);\r\n                divChat.classList.add('lt');\r\n                break;\r\n            default:\r\n                console.log( 'Стиль по умолчанию' );\r\n                // styleSheet.insertRule(\" .rb {right: 30px; bottom: 10px;} \", 0);\r\n                divChat.classList.add('rb');\r\n        }\r\n    }\r\n\r\n\r\n}","'use strict';\r\n\r\nexport default class EventOpenCloseChat {\r\n\r\n    openClose(isOpen){\r\n\r\n        // Выбор чата для добавления/удаления класса \r\n        let chatId = document.getElementById('spchat');\r\n\r\n        // проверка, открыт ли чат\r\n        if (!isOpen) {\r\n\r\n            // удаляю класс\r\n            chatId.classList.remove('spchat-hidden');\r\n\r\n            return true;\r\n\r\n        } else {\r\n\r\n            // добавляю класс\r\n            chatId.classList.add('spchat-hidden');\r\n\r\n            return false;\r\n        }\r\n    }\r\n\r\n}","'use strict';\r\n\r\nexport default class Message {\r\n\r\n    constructor(type, data, text) {\r\n\r\n        this.data = data;\r\n        this.text = text;\r\n        this.type = type;\r\n    }\r\n}\r\n\r\n","'use strict';\r\n\r\nexport default class RandomMessage{\r\n\r\n    random(lengthArray){\r\n        let rand = 0 - 0.5 + Math.random() * (lengthArray - 0 + 1)\r\n        rand = Math.round(rand);\r\n        // Если ссгенерировано -0, тогда присваеваем 0\r\n        if (rand === -0) rand = 0;\r\n\r\n        return rand;\r\n    }\r\n\r\n}\r\n\r\n","'use strict';\r\n\r\nexport default class ShowMessage {\r\n\r\n    show(createdElem){\r\n        // Поиск элемента куда вставить \r\n        let divMsg = document.getElementById('spchat__massages');\r\n        // Вставляю в конец всех элементов в родителе\r\n        divMsg.appendChild(createdElem);\r\n    }\r\n}","'use strict';\r\n\r\nimport Message from './Message';\r\n\r\nexport default class User {\r\n\r\n    constructor(id, type, data, text) {\r\n\r\n        this.id = id;\r\n        this.messages = [ new Message(type, data, text) ];\r\n    }\r\n}","'use strict';\r\n\r\nimport CreateStyleSheet from './CreateStyleSheet';\r\nimport RandomMessage from './RandomMessage';\r\nimport CreateElement from './CreateElement';\r\nimport ShowMessage from './ShowMessage';\r\nimport EventOpenCloseChat from './EventOpenCloseChat';\r\nimport User from './User';\r\n\r\nexport default class Widget {\r\n\r\n    constructor(){\r\n        // Проверка поддержки WebSocket \r\n        if (!window.WebSocket) {\r\n            document.body.innerHTML = 'WebSocket is not supported in this browser.';\r\n        }\r\n        // \r\n        this.socket = new WebSocket('ws://localhost:3001');\r\n\r\n        // Получаю из localStorage значение\r\n        this.storageIdUser = localStorage.getItem('widget-user');\r\n        // Если нет, устанавливаю\r\n        if (!this.storageIdUser) {\r\n            localStorage.setItem('widget-user', `${String(Math.random()).slice(2)}${Date.now()}`)\r\n            this.storageIdUser = localStorage.getItem('widget-user')\r\n        }\r\n \r\n        // Ищю кнопку textarea\r\n        this.sendMessage = document.getElementById('sendMessage');\r\n        \r\n    }\r\n\r\n    init(posWidget){\r\n\r\n        let id;\r\n\r\n        // Класс создания и подключения <style>\r\n        let createStyleSheet  = new CreateStyleSheet();\r\n\r\n        // Класс генерации чисел \r\n        let randomMessage = new RandomMessage();\r\n\r\n        // Класс создания html элементов\r\n        let сreateElement = new CreateElement('Артем Чичерин', 'DB Engineer', 'assets/img/news-01.jpg');\r\n\r\n        // Класс показа сообщений в чате\r\n        let showMessage = new ShowMessage();\r\n        \r\n        //\r\n        let eventOpenCloseChat = new EventOpenCloseChat();\r\n\r\n        //\r\n        createStyleSheet.getClassPosition(posWidget);\r\n\r\n        function firstMsg(message){\r\n\r\n            setTimeout(function(){\r\n            \r\n                let divMsg = сreateElement.createMessage(false, message);\r\n                // Показываю сообщение\r\n                showMessage.show(divMsg);\r\n                // Добавляю в массив сообщение\r\n                messageArray.push({name: 'manager', msg: message})\r\n            }, 700);\r\n        }\r\n\r\n        // function replyAi(){\r\n        //     setTimeout(function(){\r\n        //         // генерирую случайное число, по которому выбираю сообщение из массива\r\n        //         let msgText = arrayMesgAi[ randomMessage.random(arrayMesgAi.length-1) ]; \r\n             \r\n        //         // создаю HTML сообщения\r\n        //         let msg = сreateElement.createMessage(false, msgText);\r\n\r\n        //         // показываю \r\n        //         showMessage.show(msg);\r\n\r\n        //         // Добавляю в массив сообщение\r\n        //         messageArray.push({name: 'manager', msg: msgText})\r\n\r\n        //         // Автопрокрутка скролла\r\n        //         let scrollBodyMessage = document.getElementById('spchat__body');\r\n        //         scrollBodyMessage.scrollTop = scrollBodyMessage.scrollHeight;\r\n\r\n        //     }, 1000)\r\n\r\n        // }\r\n        /**************START******************/\r\n\r\n        // Флаг online\r\n        let onlineUser = false;\r\n\r\n        // Флаг, чат открыт/закрыт\r\n        let chatOpen = false;\r\n\r\n        // Выбор кнопки закрыть для закрытия чата \r\n        let chatIdClose = document.getElementById('spchat__close');\r\n\r\n        // Выбор header чата\r\n        let chatIdHead = document.getElementById('spchat__header');\r\n        \r\n        // Флаг, ответа пользователя\r\n        let userReply = false;\r\n\r\n        //\r\n        let messageArray = [];\r\n\r\n        // Временный массив ответов менеджера\r\n        let arrayMesgAi = [\r\n            ' Как к Вам обращаться ',\r\n            ' Мне необходимо время на уточнение информации ',\r\n            ' Пока жду ответа от руководства, могу рассказать анекдот ',\r\n            ' Одну минуту, пожайлуста ',\r\n            ' Время ожидания ответа истекло. Попробуйте обратиться позже ',\r\n            ' Сообщите свой e-mail, я на него позже отвечу',\r\n            ' Как с Вам связаться?',\r\n            ' Прошу Вас подождать, я отвечу через несколько минут '\r\n        ];\r\n\r\n        // Событие на загрузку документа\r\n        document.addEventListener('DOMContentLoaded', listenerDOMContentLoaded);\r\n\r\n        function listenerDOMContentLoaded(){\r\n\r\n            // через 3,5сек выполнить \r\n            setTimeout(function(){\r\n                // Если чат закрыть, то открыть\r\n                if(!chatOpen) {\r\n\r\n                    // chatOpen = eventOpenCloseChat.openClose(chatOpen);\r\n                    listenerOpenClose()\r\n\r\n                    console.log('3.5');\r\n                } \r\n\r\n            }, 3500);\r\n             \r\n        }\r\n\r\n        // // Событие на активность документа\r\n        // window.addEventListener(\"focus\", function() {\r\n\r\n        //     if (onlineUser) {\r\n        //         // Открыть чат автоматически по истечению 3,5с\r\n        //         setTimeout(function(){\r\n        //             eventOpenChat();\r\n        //             console.log('setTimeout - ok') \r\n        //         }, 4500);\r\n        //     }\r\n            \r\n        //     console.log('active') \r\n        // });\r\n\r\n        // // Событие на уход со страницы\r\n        // window.addEventListener(\"blur\", function() {\r\n        //     onlineUser = true;\r\n        // });\r\n\r\n\r\n        // Вешаю событие клик на header \r\n        chatIdHead.addEventListener('click', listenerOpenClose);\r\n\r\n        function listenerOpenClose(){\r\n\r\n            chatOpen = eventOpenCloseChat.openClose(chatOpen);\r\n\r\n            if (chatOpen) {\r\n                \r\n                // удаляю прослушку события по header чата\r\n                chatIdHead.removeEventListener('click', listenerOpenClose);\r\n\r\n                // Вешаю прослушку события на кпонку закрытие\r\n                chatIdClose.addEventListener('click', listenerOpenClose);\r\n\r\n                // Пустой ли массив сообщений\r\n                if (messageArray.length === 0) {\r\n                    // Функция \r\n                    firstMsg('Здравствуйте! Чем я могу вам помочь?');\r\n                }\r\n                console.log('удалить событие на header и добавлено на close');\r\n            } else {\r\n                // Вешаю событие клик на header \r\n                chatIdHead.addEventListener('click', listenerOpenClose);\r\n                // удаляю прослушку события на кпонку закрытие\r\n                chatIdClose.removeEventListener('click', listenerOpenClose);\r\n                console.log('добавить');\r\n            }\r\n\r\n        };\r\n\r\n\r\n        // Вешаю событиние на Enter\r\n        sendMessage.addEventListener('keydown', listenerSendMessage.bind(this));\r\n      \r\n        function listenerSendMessage(event){\r\n\r\n            // Если нажата кнопка Enter(13)\r\n            if (event.keyCode === 13) {\r\n\r\n                // Отменяю перенос строки, действие по умолчанию\r\n                event.preventDefault();\r\n\r\n                // Если сообщение не пустое\r\n                if( event.target.value !== '') {\r\n\r\n                    // Создаю html разметку с собщением \r\n                    let msg = сreateElement.createMessage(true, event.target.value);\r\n\r\n                    // Показываю в чате\r\n                    showMessage.show(msg); \r\n                    // Добавляю в локальный массив\r\n                    messageArray.push({name: 'user', msg: event.target.value})\r\n\r\n                    // Отправляю сообщение по websocket\r\n                    let msgString = JSON.stringify(new User(this.storageIdUser,  'user', Date.now(), event.target.value))\r\n\r\n                    this.socket.send(msgString);\r\n                \r\n                    // Ответа манагера\r\n                    // replyAi();\r\n                }\r\n\r\n                // Автопрокрутка скролла\r\n                let scrollBodyMessage = document.getElementById('spchat__body');\r\n                scrollBodyMessage.scrollTop = scrollBodyMessage.scrollHeight;\r\n\r\n                // Сбрасываю значение поля\r\n                sendMessage.value = '';\r\n            }\r\n        }\r\n\r\n\r\n        this.socket.onmessage = event => {\r\n            \r\n            \r\n            let messageFromManager = JSON.parse(event.data);\r\n\r\n            let msg = сreateElement.createMessage(false, messageFromManager.messages[0].message);\r\n            showMessage.show(msg);\r\n\r\n            // Добавляем в локальный массив переписки\r\n            messageArray.push({name: 'manager', msg: messageFromManager.messages[0].message})\r\n            console.log(messageArray);\r\n            \r\n            // Автопрокрутка скролла\r\n            let scrollBodyMessage = document.getElementById('spchat__body');\r\n            scrollBodyMessage.scrollTop = scrollBodyMessage.scrollHeight;\r\n            \r\n        };\r\n\r\n  \r\n    };\r\n\r\n\r\n    \r\n}\r\n\r\n"],"sourceRoot":""}